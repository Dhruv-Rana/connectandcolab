(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{1376:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n(39),s=n.n(a),l=n(47),o=n.n(l),i=n(73),r=n(11),j=n(21),u=n(22),d=n(26),b=n(25),h=n(13),O=n(28),m=n(1440),x=n(1441),f=n(1428),p=n(1442),g=n(70),v=n(1424),y=n(1420),C=n(20),T=n(1437),S=n(275),k=n.n(S),I=n(1433),w=n(1439),A=n(284),N=n(74),E=n.n(N),D=n(159),L=n(260),P=(n(317),n(268)),M=n.n(P),R=n(282),B="https://localhost:5000",_=Object(R.a)(B,{path:"/iohost",autoConnect:!1,reconnection:!1,cors:{origin:"*"},transports:["websocket"]}),U=n(3),H=function(e){var t=Object(c.useRef)(""),n=Object(L.a)({theme:"snow",modules:{toolbar:[["bold","italic","underline","strike"],[{align:[]}],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],["link","video"],[{color:[]},{background:[]}],["clean"]],clipboard:{matchVisual:!1}},formats:["bold","italic","underline","strike","align","list","indent","size","header","link","video","color","background","clean"]}),a=n.quill,s=n.quillRef,l=function(){e.handleClose()};return Object(c.useEffect)((function(){return _.on("POST::CREATE",(function(t){console.log("POST::CREATE :",t),t.status?(e.displayNotification("success","Post Created",3e3),l()):e.displayNotification("error","Invalid Inputs",5e3)})),function(){_.removeAllListeners("POST::CREATE")}}),[]),Object(U.jsxs)("form",{className:"ui form",style:{marginLeft:"10px"},children:[Object(U.jsx)("label",{children:Object(U.jsx)("h3",{children:"Title of the post"})}),Object(U.jsx)("br",{}),Object(U.jsx)("input",{type:"text",required:!0,style:{width:"70%"},onChange:function(e){t.current=e.target.value}}),Object(U.jsx)("h3",{children:"Content"}),Object(U.jsx)("div",{style:{width:"96%",height:300,marginTop:"10px"},children:Object(U.jsx)("div",{ref:s})}),Object(U.jsx)(T.a,{variant:"contained",onClick:function(){if(""!==t.current){for(var n=a.root.innerHTML,c=n.length,s=!0,l=0;l<c;)if("<"===n[l]){for(var o=l;o<c&&">"!==n[o];)o+=1;l=o+1}else{if(" "!==n[l]){s=!1;break}l+=1}s?alert("Content cannot be empty!"):e.handlePostSubmit(t.current,a.root.innerHTML)}else alert("Title cannot be Empty!")},style:{marginTop:"100px",marginLeft:"10px",marginBottom:"20px"},children:"Post"}),Object(U.jsx)(T.a,{variant:"outlined",style:{color:"red",marginTop:"100px",marginLeft:"20px",marginBottom:"20px"},startIcon:Object(U.jsx)(M.a,{}),onClick:l,children:"Cancel"})]})},K=n(1434),W=n(1425),Y=n(1438),F=n(269),z=n.n(F),G=(n(390),n(1430)),q=function(e){var t=Object(c.useState)(null),n=Object(r.a)(t,2),a=n[0],s=n[1],l=Object(c.useState)(""),o=Object(r.a)(l,2),i=o[0],j=o[1],u=Object(c.useRef)(null);Object(c.useEffect)((function(){a&&u.current&&u.current.children[0].focus()}),[a]);var d=function(){""!==i?(_.emit("POST::ADD_COMMENT",{postId:e.postId,parentId:a,commentBody:i}),j(""),s(null)):alert("Comment cannot be empty!")};return function(e,t){if(0===t.length)return"";if(null===e)return"";for(var n=t.length,c=[],l=0;l<n+1;l++)c.push([]);for(var o=new Map,i=0;i<n;i++)o.set(t[i].commentId,i);o.set(e,n);for(var r=0;r<n;r++){var b=o.get(t[r].commentId),h=o.get(t[r].parentId);c[h].push(b)}return function e(n){return c[n].sort((function(e,t){return e.timeStamp<t.timeStamp})),Object(U.jsx)(G.a.Group,{style:{paddingBottom:0,marginTop:2,marginBottom:2},children:c[n].map((function(n){return Object(U.jsxs)(G.a,{style:{paddingBottom:0,paddingTop:0,marginTop:2,marginBottom:2},children:[Object(U.jsx)(G.a.Avatar,{src:t[n].user.userImage}),Object(U.jsxs)(G.a.Content,{children:[Object(U.jsx)(G.a.Author,{as:"span",children:"".concat(t[n].user.firstName," ").concat(t[n].user.lastName)}),Object(U.jsx)(G.a.Metadata,{children:Object(U.jsx)("span",{style:{fontWeight:700},children:E.a.unix(t[n].timeStamp/1e3).format("HH:mm  DD/MM/YYYY")})}),Object(U.jsx)(G.a.Text,{children:t[n].commentBody}),Object(U.jsx)(G.a.Actions,{children:Object(U.jsx)(G.a.Action,{onClick:function(){return s(t[n].commentId)},children:Object(U.jsx)("span",{style:{fontWeight:700},children:"Reply"})})}),a===t[n].commentId?Object(U.jsxs)(W.a,{children:[Object(U.jsx)(Y.a,{innerRef:u,children:Object(U.jsx)(W.a.TextArea,{onChange:function(e){return j(e.target.value)}})}),Object(U.jsx)(K.a,{primary:!0,type:"button",content:"Add Reply",labelPosition:"left",icon:"edit",onClick:d}),Object(U.jsx)(K.a,{color:"red",type:"button",content:"Cancel",onClick:function(){j(""),s(null)}})]}):null]}),e(n)]},t[n].commentId)}))})}(n)}(e.postId,e.comments)},J=function(e){var t=e.postId,n=Object(c.useState)(!1),a=Object(r.a)(n,2),s=a[0],l=a[1],o=Object(c.useState)(!1),i=Object(r.a)(o,2),j=i[0],u=i[1],d=Object(c.useState)(""),b=Object(r.a)(d,2),h=b[0],O=b[1],m=Object(c.useState)({}),x=Object(r.a)(m,2),f=x[0],p=x[1],v=Object(c.useState)([]),T=Object(r.a)(v,2),S=T[0],k=T[1],N=Object(c.useRef)(null);Object(c.useEffect)((function(){return _.on("POST::GET",(function(e){if(console.log("POST::GET :",e),e.status){var t=e.postData,n=t.comments,c=t.postBody,a=t.postId,s=t.postTitle,o=t.timeStamp,i=t.user;p({postBody:c,postId:a,postTitle:s,timeStamp:o,user:i}),k(Object(C.a)(n)),l(!0)}})),_.on("POST::ADD_COMMENT",(function(e){console.log("POST::ADD_COMMENT :",e)})),function(){_.removeAllListeners("POST::GET"),_.removeAllListeners("POST::ADD_COMMENT")}}),[]),Object(c.useEffect)((function(){return _.on("POST::ADD_COMMENT::".concat(t),(function(e){console.log("POST::ADD_COMMENT::".concat(t," :"),e),k([].concat(Object(C.a)(S),[e.commentData]))})),function(){_.removeAllListeners("POST::ADD_COMMENT::".concat(t))}}),[S]),Object(c.useEffect)((function(){j&&N.current&&N.current.children[0].focus()}),[j]),Object(c.useEffect)((function(){_.emit("POST::GET",{postId:t})}),[]);return Object(U.jsx)(g.a.Body,{children:s?Object(U.jsxs)(I.a,{style:{width:"100%"},children:[Object(U.jsx)(I.a.Header,{}),Object(U.jsxs)(I.a.Content,{children:[Object(U.jsxs)(w.a,{columns:2,children:[Object(U.jsx)(w.a.Column,{children:Object(U.jsxs)("h2",{children:["Title : ",f.postTitle]})}),Object(U.jsx)(w.a.Column,{textAlign:"right",children:Object(U.jsx)(K.a,{primary:!0,onClick:e.closePost,children:"Return to All Posts"})})]}),Object(U.jsx)("hr",{}),Object(U.jsx)(w.a,{columns:1,children:Object(U.jsxs)(w.a.Column,{children:[Object(U.jsx)(w.a.Row,{children:Object(U.jsx)("h3",{children:"Content : "})}),Object(U.jsx)("br",{}),Object(U.jsx)(w.a.Row,{children:Object(U.jsx)(z.a,{theme:"snow",value:f.postBody,readOnly:!0,modules:{toolbar:!1}})})]})}),Object(U.jsx)("hr",{}),Object(U.jsxs)(w.a,{columns:8,children:[Object(U.jsx)(w.a.Column,{textAlign:"right",verticalAlign:"middle",children:Object(U.jsx)("h4",{children:"User : "})}),Object(U.jsx)(w.a.Column,{textAlign:"center",verticalAlign:"middle",children:Object(U.jsx)(A.a,{avatar:!0,centered:!0,size:"massive",src:f.user.userImage,className:"p-1"})}),Object(U.jsx)(w.a.Column,{textAlign:"left",verticalAlign:"middle",children:Object(U.jsx)("h5",{children:"".concat(f.user.firstName," ").concat(f.user.lastName||"")})}),Object(U.jsx)(w.a.Column,{children:""}),Object(U.jsx)(w.a.Column,{children:""}),Object(U.jsx)(w.a.Column,{children:""}),Object(U.jsx)(w.a.Column,{textAlign:"right",verticalAlign:"middle",children:Object(U.jsx)("b",{children:E.a.unix(f.timeStamp/1e3).format("HH:mm")})}),Object(U.jsx)(w.a.Column,{textAlign:"left",verticalAlign:"middle",children:Object(U.jsx)("b",{children:E.a.unix(f.timeStamp/1e3).format("DD/MM/YYYY")})})]}),Object(U.jsx)("hr",{}),Object(U.jsxs)(w.a,{columns:3,children:[Object(U.jsx)(w.a.Column,{children:Object(U.jsx)("h3",{children:"Comments : "})}),Object(U.jsx)(w.a.Column,{children:j?Object(U.jsxs)(W.a,{children:[Object(U.jsx)(Y.a,{innerRef:N,children:Object(U.jsx)(W.a.TextArea,{onChange:function(e){return O(e.target.value)}})}),Object(U.jsx)(K.a,{primary:!0,content:"Add",size:"small",onClick:function(){""!==h?(_.emit("POST::ADD_COMMENT",{postId:t,parentId:t,commentBody:h}),O(""),u(!1)):alert("Comment cannot be Empty!")}})]}):null}),Object(U.jsx)(w.a.Column,{textAlign:"right",children:Object(U.jsx)(K.a,{color:j?"red":"blue",secondary:!j,onClick:function(){u(!j)},children:j?"Cancel":"Write Comment"})})]}),Object(U.jsx)("hr",{}),Object(U.jsxs)(w.a,{columns:"equal",children:[Object(U.jsx)(w.a.Column,{width:1,children:""}),Object(U.jsx)(w.a.Column,{width:12,children:Object(U.jsx)(q,{comments:S,postId:t})})]}),Object(U.jsx)("hr",{})]})]}):Object(U.jsx)(y.a,{style:{justifySelf:"center",alignSelf:"center"},animation:"border",variant:"info"})})},V=(n(394),function(e){Object(d.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(j.a)(this,n);for(var c=arguments.length,a=new Array(c),s=0;s<c;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={posts:[],open:!1,showPost:null,nextPage:1},e.handleOpen=function(){e.setState({open:!e.state.open})},e.handleClose=function(){e.setState({open:!1})},e.handlePostSubmit=function(e,t){console.log("emit POST::CREATE :",e,t);var n={postTitle:e,postBody:t};_.emit("POST::CREATE",n)},e.handlePostClick=function(t){e.props.modalOperations.openModal(Object(U.jsx)(J,{postId:t,closePost:e.props.modalOperations.closeModal}))},e.fetchPosts=function(){var t={pageOffset:e.state.posts.length};_.emit("POST::LIST",t),console.log("Emitting => POST::LIST\n    data :",t)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=Object(i.a)(o.a.mark((function e(){var t=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_.on("POST::NEW",(function(e){console.log("POST::NEW :",e),t.setState({posts:[e.postData].concat(Object(C.a)(t.state.posts)),pageOffset:(t.state.pageOffset+1)%20})})),_.on("POST::LIST",(function(e){console.log("POST::LIST :",e),t.setState({posts:[].concat(Object(C.a)(t.state.posts),Object(C.a)(e.posts)),pageNumber:t.state.pageNumber+1,nextPage:e.nextPage})})),this.fetchPosts();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){_.removeAllListeners("POST::LIST"),_.removeAllListeners("POST::NEW")}},{key:"render",value:function(){var e=this,t=this.state.showPost,n=this.state.open;return Object(U.jsxs)("div",{style:{height:"100vh"},children:[Object(U.jsx)(g.a,{show:n,backdrop:!0,keyboard:!1,animation:!1,children:Object(U.jsx)(g.a.Body,{children:Object(U.jsx)(H,{displayNotification:this.props.displayNotification,handleClose:this.handleClose,handlePostSubmit:this.handlePostSubmit})})}),Object(U.jsx)(g.a,{show:null!==t,fullscreen:!0,backdrop:!0,keyboard:!1,animation:!1,style:{width:"100%"},children:Object(U.jsx)(g.a.Body,{children:Object(U.jsx)(J,{postId:t})})}),Object(U.jsxs)("div",{style:{textAlign:"center",marginLeft:"auto",marginRight:"auto",width:"100%",padding:"5px",height:"100%"},children:[Object(U.jsx)(T.a,{variant:"contained",endIcon:Object(U.jsx)(k.a,{}),onClick:this.handleOpen,children:"Write New Post"}),Object(U.jsx)("br",{}),Object(U.jsx)("br",{}),Object(U.jsx)("div",{style:{height:"100%",overflow:"auto"},id:"scrollablePostDiv",children:Object(U.jsx)(D.a,{dataLength:this.state.posts.length,next:this.fetchPosts,hasMore:null!==this.state.nextPage,loader:Object(U.jsx)("h4",{children:"Loading..."}),endMessage:Object(U.jsx)("div",{style:{textAlign:"center"},children:Object(U.jsx)("b",{children:"Yay! You have seen it all"})}),style:{backgroundColor:"whitesmoke",padding:"10px",display:"flex",flexDirection:"column",alignItems:"center",overflow:!1,height:"100%"},scrollableTarget:"scrollablePostDiv",children:this.state.posts.map((function(t){var n=t.postTitle;return n.length>100&&(n=n.slice(0,100)+"..."),Object(U.jsxs)(I.a,{color:"red",style:{width:"60%",display:"flex",marginBottom:5},children:[Object(U.jsx)(I.a.Content,{header:n}),Object(U.jsx)(I.a.Description,{children:Object(U.jsxs)(w.a,{columns:"two",children:[Object(U.jsxs)(w.a.Column,{textAlign:"center",children:[Object(U.jsx)(w.a.Row,{children:Object(U.jsx)(A.a,{avatar:!0,centered:!0,size:"massive",src:t.user.userImage,className:"p-1"})}),Object(U.jsx)(w.a.Row,{children:Object(U.jsx)("span",{style:{float:"left"},children:"".concat(t.user.firstName," ").concat(t.user.lastName)})})]}),Object(U.jsxs)(w.a.Column,{textAlign:"center",children:[Object(U.jsx)(w.a.Row,{children:Object(U.jsx)("div",{children:E.a.unix(t.timeStamp/1e3).format("HH:mm DD/MM/YYYY")})}),Object(U.jsx)(w.a.Row,{children:Object(U.jsx)(T.a,{variant:"contained",onClick:function(){return e.handlePostClick(t.postId)},size:"medium",style:{width:"80%"},children:"View Post"})})]})]})})]},t.postId)}))})})]})]})}}]),n}(c.Component)),X=n(118),Q=(n(202),function(e){var t=Object(c.useState)([]),n=Object(r.a)(t,2),a=n[0],s=n[1],l=Object(c.useState)(!1),o=Object(r.a)(l,2),i=o[0],j=o[1];return Object(c.useEffect)((function(){return _.on("USER::LIST",(function(t){if(console.log("USER::LIST :",t),t.status){var n=t.userData.filter((function(t){return t.userId!==e.userId}));s(Object(C.a)(n)),j(!0)}})),function(){_.removeAllListeners("USER::LIST")}}),[e.userId]),Object(c.useEffect)((function(){_.emit("USER::LIST",{})}),[]),Object(U.jsx)(g.a.Body,{children:Object(U.jsxs)(I.a,{style:{width:"100%"},children:[Object(U.jsx)(I.a.Content,{children:Object(U.jsxs)(w.a,{columns:2,children:[Object(U.jsx)(w.a.Column,{children:Object(U.jsx)("h3",{children:"Select User To Start Talk"})}),Object(U.jsx)(w.a.Column,{textAlign:"right",children:Object(U.jsx)(K.a,{color:"red",onClick:function(){return e.setModalOpen(!1)},children:"Cancel"})})]})}),Object(U.jsx)(I.a.Content,{children:i?Object(U.jsx)(X.ChatList,{onClick:function(t){e.setTalkUser(t.userData),e.setModalType(0),e.setModalOpen(!0)},dataSource:a.map((function(e){return{avatar:e.userImage,alt:e.firstName+" "+e.lastName,title:e.firstName+" "+e.lastName,subtitle:e.isOnline?"Online":"Offline",date:e.isOnline?Date.now():e.lastOnline,userId:e.userId,userData:e}}))}):Object(U.jsx)(y.a,{animation:"border"})})]})})}),Z=function(e){var t=e.talkUser,n=Object(c.useState)(e.talkId),a=Object(r.a)(n,2),s=a[0],l=a[1],o=Object(c.useState)(!e.talkId),i=Object(r.a)(o,2),j=i[0],u=i[1],d=Object(c.useState)([]),b=Object(r.a)(d,2),h=b[0],O=b[1],m=Object(c.useState)(!1),x=Object(r.a)(m,2),f=x[0],p=x[1],v=Object(c.useState)(""),T=Object(r.a)(v,2),S=T[0],k=T[1],N=Object(c.useRef)(null);return Object(c.useEffect)((function(){return _.on("TALK::GET",(function(e){console.log("TALK::GET :",e),e.status?(O(Object(C.a)(e.talkData.chat.reverse())),p(!0)):p(!0)})),function(){_.removeAllListeners("TALK::GET")}}),[e.userId]),Object(c.useEffect)((function(){return _.on("TALK::SEND",(function(e){console.log("TALK::SEND :",e)})),function(){_.removeAllListeners("TALK::SEND")}})),Object(c.useEffect)((function(){var t=e.newTalk;j&&t?(O([t]),u(!1),l(t.talkId),e.setTalkId(t.talkId),e.setNewTalk(null)):t&&t.talkId===s&&(O([t].concat(Object(C.a)(h))),e.setNewTalk(null))}),[h,e,e.newTalk,s,j]),Object(c.useEffect)((function(){_.emit("TALK::GET",{recipientUserId:t.userId})}),[]),Object(U.jsx)(g.a.Body,{children:Object(U.jsxs)(I.a,{style:{width:"100%"},children:[Object(U.jsx)(I.a.Content,{children:Object(U.jsxs)(w.a,{columns:2,children:[Object(U.jsx)(w.a.Column,{children:Object(U.jsxs)(w.a,{columns:4,children:[Object(U.jsx)(w.a.Column,{textAlign:"center",verticalAlign:"middle",children:Object(U.jsx)(A.a,{avatar:!0,centered:!0,size:"massive",src:t.userImage,className:"p-1"})}),Object(U.jsx)(w.a.Column,{textAlign:"right",verticalAlign:"middle",children:Object(U.jsx)("h5",{children:"".concat(t.firstName)})}),Object(U.jsx)(w.a.Column,{textAlign:"left",verticalAlign:"middle",children:Object(U.jsx)("h5",{children:"".concat(t.lastName||"")})}),Object(U.jsx)(w.a.Column,{children:""})]})}),Object(U.jsx)(w.a.Column,{textAlign:"right",children:Object(U.jsx)(K.a,{primary:!0,onClick:function(){e.setTalkId(null),e.setModalOpen(!1)},children:"Back To Talks"})})]})}),Object(U.jsx)(I.a.Content,{children:f?Object(U.jsx)("div",{style:{height:450,overflow:"auto",display:"flex",flexDirection:"column-reverse"},className:"w-100",id:"scrollablePostDiv",children:Object(U.jsx)(D.a,{className:"w-100",dataLength:h.length,hasMore:!1,loader:Object(U.jsx)(U.Fragment,{}),next:function(){},scrollableTarget:"scrollablePostDiv",style:{padding:10,width:"100%",height:450,overflowX:"hidden",display:"flex",flexDirection:"column-reverse"},children:h.map((function(e,n){return Object(U.jsx)(w.a,{columns:1,children:Object(U.jsx)(w.a.Column,{className:"w-100 mt-3 mb-0",children:Object(U.jsxs)(I.a,{style:{float:e.user!==t.userId?"right":"left"},children:[Object(U.jsx)(I.a.Content,{textAlign:e.user!==t.userId?"right":"left",style:{backgroundColor:"whitesmoke",margin:0},children:Object(U.jsx)("h4",{children:e.message})}),Object(U.jsx)(I.a.Meta,{textAlign:e.user!==t.userId?"right":"left",style:{backgroundColor:"whitesmoke",paddingTop:0,paddingBottom:0,marginTop:0,marginBottom:0},children:E.a.unix(e.timeStamp/1e3).format("HH:mm DD/MM/YY")})]})})},n)}))})}):Object(U.jsx)(y.a,{animation:"border"})}),Object(U.jsx)(I.a.Content,{children:Object(U.jsx)(X.Input,{multiline:!0,autoHeight:!0,maxHeight:50,ref:N,value:S,onChange:function(e){return k(e.target.value)},autofocus:!0,placeholder:"Type Your Message Here",rightButtons:Object(U.jsx)(K.a,{disabled:!S,primary:!0,onClick:function(){_.emit("TALK::SEND",{recipientUserId:t.userId,message:S}),k(""),N.current.input.value="",N.current.input.focus()},children:"Send"})})})]})})},$=function(){var e=Object(c.useState)(),t=Object(r.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)([]),l=Object(r.a)(s,2),o=l[0],i=l[1],j=Object(c.useState)(!1),u=Object(r.a)(j,2),d=u[0],b=u[1],h=Object(c.useState)(0),O=Object(r.a)(h,2),m=O[0],x=O[1],f=Object(c.useState)(null),p=Object(r.a)(f,2),v=p[0],y=p[1],T=Object(c.useState)(null),S=Object(r.a)(T,2),k=S[0],I=S[1],A=Object(c.useState)(null),N=Object(r.a)(A,2),E=N[0],D=N[1];return Object(c.useEffect)((function(){return _.on("TALK::LIST",(function(e){console.log("TALK::LIST :",e),e.status&&(a(e.userId),i(Object(C.a)(e.talkData.sort((function(e,t){return e.lastActivity<t.lastActivity?1:-1})))))})),function(){_.removeAllListeners("TALK::LIST")}}),[]),Object(c.useEffect)((function(){return _.on("TALK::NEW",(function(e){if(console.log("TALK::NEW :",e),e.status){var t=e.messageData,n=t.user,c=t.message,a=t.timeStamp;D({user:n.userId,message:c,timeStamp:a,talkId:e.talkId})}})),function(){_.removeAllListeners("TALK::NEW")}}),[]),Object(c.useEffect)((function(){E&&(-1!==o.findIndex((function(e){return e.talkId===E.talkId}))?(console.log("inside ue :",E,v,o),v?v!==E.talkId&&D(null):D(null),_.emit("TALK::LIST")):(D(null),_.emit("TALK::LIST")))}),[E,v,o]),Object(c.useEffect)((function(){_.emit("TALK::LIST")}),[]),Object(U.jsxs)(U.Fragment,{children:[d?Object(U.jsx)(g.a,{show:!0,keyboard:!1,scrollable:!0,animation:!1,size:"xl",children:m?Object(U.jsx)(Q,{userId:n,setModalOpen:b,setModalType:x,setTalkUser:I}):Object(U.jsx)(Z,{userId:n,talkId:v,talkUser:k,newTalk:E,setTalkId:y,setNewTalk:D,setModalOpen:b})}):null,Object(U.jsx)(w.a,{columns:1,children:Object(U.jsxs)(w.a.Column,{children:[Object(U.jsx)(w.a,{columns:1,children:Object(U.jsx)(w.a.Column,{textAlign:"center",children:Object(U.jsx)(K.a,{primary:!0,onClick:function(){x(1),b(!0)},children:"New Talk"})})}),Object(U.jsx)("hr",{}),Object(U.jsx)(w.a,{columns:1,children:Object(U.jsx)(w.a.Column,{children:o.length?Object(U.jsx)(X.ChatList,{onClick:function(e){y(e.talkId),I(e.userData),x(0),b(!0)},dataSource:o.map((function(e){var t=e.participant.find((function(e){return e.userId!==n}));return{avatar:t.userImage,alt:t.firstName+" "+t.lastName,title:t.firstName+" "+t.lastName,subtitle:e.lastChat.message.length>50?e.lastChat.message.slice(0,50)+"....":e.lastChat.message,date:e.lastActivity,talkId:e.talkId,userData:t}}))}):Object(U.jsx)(w.a,{columns:1,children:Object(U.jsxs)(w.a.Column,{textAlign:"center",children:[Object(U.jsx)("h3",{children:"Empty !"}),Object(U.jsx)("h3",{children:"Start New Talk ! \ud83d\ude01"})]})})})})]})})]})},ee=n(276),te=n(131),ne=n(277),ce=n.n(ne).a.create({baseURL:B,withCredentials:!0}),ae=function(e){Object(d.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(j.a)(this,n);for(var c=arguments.length,a=new Array(c),s=0;s<c;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).handleSubmit=function(){var t=Object(i.a)(o.a.mark((function t(n){var c,a,s,l;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),"application/pdf"===(c=n.target[2].files[0]).type){t.next=5;break}return alert("Please upload file in pdf format only!"),t.abrupt("return");case 5:if(!(c.size>1e8)){t.next=8;break}return alert("File size should not exceed 100MB!"),t.abrupt("return");case 8:return a=new FormData,console.log(n),a.append("noteName",n.target[0].value),a.append("noteDescription",n.target[1].value),a.append("note",c),t.next=15,ce.post("/notes/create",a,{headers:{"Content-Type":"multipart/form-data"}});case 15:s=t.sent,l=s.data,console.log(l),e.props.handleClose();case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleCancel=function(){e.props.handleClose()},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return Object(U.jsxs)("div",{style:{marginLeft:"10px"},children:[Object(U.jsx)("h1",{style:{textAlign:"center"},children:"Add Notes"}),Object(U.jsxs)("form",{className:"ui form",style:{width:"1000px",margin:"0 auto"},onSubmit:this.handleSubmit,children:[Object(U.jsx)("label",{children:Object(U.jsx)("h4",{children:"Subject:*"})}),Object(U.jsx)("br",{}),Object(U.jsx)("input",{type:"text",style:{width:"60%"},required:!0}),Object(U.jsx)("br",{}),Object(U.jsx)("br",{}),Object(U.jsx)("label",{children:Object(U.jsx)("h4",{children:"Optional Description:"})}),Object(U.jsx)("br",{}),Object(U.jsx)("input",{type:"text",style:{width:"90%"}}),Object(U.jsx)("br",{}),Object(U.jsx)("br",{}),Object(U.jsx)("label",{children:Object(U.jsx)("h4",{children:"Notes File:(Please Upload file in PDF Format only)*"})}),Object(U.jsx)("input",{type:"file",accept:".pdf",style:{width:"90%"},required:!0}),Object(U.jsx)("br",{}),Object(U.jsx)("br",{}),Object(U.jsx)("br",{}),Object(U.jsx)("input",{type:"submit",className:"ui button primary",value:"Upload",style:{marginTop:"20px",marginLeft:"10px",marginBottom:"20px"}}),Object(U.jsx)("button",{className:"ui button negative",style:{marginTop:"20px",marginLeft:"20px",marginBottom:"20px"},onClick:function(){return e.handleCancel()},children:"Cancel"})]})]})}}]),n}(c.Component),se=n(1421),le=n(1427),oe=function(e){return Object(U.jsx)(se.a,{className:"home",children:Object(U.jsx)(se.a,{item:!0,xs:12,className:"gridItem",children:Object(U.jsx)(le.a,{display:"flex",alignItems:"center",justifyContent:"center",children:e.children})})})},ie=function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(!1),l=Object(r.a)(s,2),j=l[0],u=l[1],d=Object(c.useState)(null),b=Object(r.a)(d,2),h=b[0],O=b[1];return Object(c.useEffect)((function(){return _.on("NOTE::NEW",(function(e){console.log("NOTE::NEW :",e),e.status&&a([e.noteData].concat(Object(C.a)(n)))})),function(){_.removeAllListeners("NOTE::NEW")}}),[n]),Object(c.useEffect)((function(){Object(i.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.post("/notes/list");case 2:t=e.sent,n=t.data,console.log("/notes/list :",n),n.status&&a(Object(C.a)(n.noteData));case 6:case"end":return e.stop()}}),e)})))()}),[]),Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(g.a,{show:j,backdrop:!0,keyboard:!1,animation:!1,children:Object(U.jsx)(g.a.Body,{children:Object(U.jsx)(ae,{handleClose:u})})}),Object(U.jsx)(g.a,{show:null!==h,keyboard:!1,animation:!1,size:"lg",dialogClassName:"modal-90w",children:Object(U.jsx)(g.a.Body,{children:Object(U.jsx)(w.a,{columns:1,children:Object(U.jsxs)(w.a.Column,{children:[Object(U.jsx)(w.a.Row,{children:Object(U.jsx)(ee.PDFObject,{width:"100%",height:"500px",url:B+"/notes/get/"+h})}),Object(U.jsx)(w.a.Row,{children:Object(U.jsx)(K.a,{color:"red",onClick:function(){O(null)},style:{marginLeft:"auto",marginRight:"auto",width:"50%"},children:"Close"})})]})})})}),Object(U.jsx)(oe,{children:Object(U.jsxs)(K.a,{primary:!0,onClick:function(){return u(!0)},style:{marginBottom:10},children:[Object(U.jsx)(te.a,{name:"add"})," ",Object(U.jsx)("h4",{children:"Upload Notes"})]})}),Object(U.jsx)("div",{style:{backgroundColor:"whitesmoke",padding:"10px",display:"flex",flexDirection:"column",alignItems:"center",overflow:!1},children:n.map((function(e){var t=e.noteName;return t.length>100&&(t=t.slice(0,100)+"..."),Object(U.jsxs)(I.a,{color:"red",style:{width:"60%",display:"flex"},children:[Object(U.jsx)(I.a.Content,{textAlign:"center",header:t}),Object(U.jsx)(I.a.Description,{children:Object(U.jsx)(w.a,{columns:"one",children:Object(U.jsx)(w.a.Column,{textAlign:"center",children:Object(U.jsx)(w.a.Row,{textAlign:"center",style:{width:"60%"},children:Object(U.jsx)("span",{children:e.noteDescription})})})})}),Object(U.jsx)(I.a.Content,{children:Object(U.jsx)(w.a,{columns:1,children:Object(U.jsx)(w.a.Column,{textAlign:"center",children:Object(U.jsx)(K.a,{color:"grey",variant:"contained",onClick:function(){return O(e.noteId)},size:"medium",style:{width:"80%"},children:"View / Download Notes"})})})})]},e.noteId)}))})]})},re=function(e){return Object(c.useEffect)((function(){e.logout()}),[]),Object(U.jsx)(U.Fragment,{})};function je(e){var t=e.children,n=e.value,c=e.index,a=Object(O.a)(e,["children","value","index"]);return Object(U.jsx)("div",Object(h.a)(Object(h.a)({role:"tabpanel",hidden:n!==c,id:"simple-tabpanel-".concat(c),"aria-labelledby":"simple-tab-".concat(c)},a),{},{children:n===c&&Object(U.jsx)(m.a,{sx:{p:3},children:Object(U.jsx)(x.a,{children:t})})}))}function ue(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var de=function(e){Object(d.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(j.a)(this,n);for(var c=arguments.length,a=new Array(c),s=0;s<c;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={value:0,isOnline:!1,showModal:!1,modalProps:{fullscreen:!0},modalContent:null},e.openModal=function(t){e.setState({showModal:!0,modalContent:t})},e.closeModal=function(){e.setState({showModal:!1,modalContent:null})},e.handleChange=function(t,n){e.setState({value:n})},e.timeoutRef=null,e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;_.on("connect",(function(){e.timeoutRef&&clearInterval(e.timeoutRef),console.log("connected"),e.setState({isOnline:!0})})),_.on("disconnect",(function(){console.log("disconnected"),e.setState({isOnline:!1}),e.timeoutRef=setInterval((function(){_.connect(),console.log("connect called in loader")}),3e3)})),_.on("error",(function(){return window.location.reload()})),_.connect()}},{key:"componentWillUnmount",value:function(){this.timeoutRef&&clearInterval(this.timeoutRef),_.removeAllListeners("disconnect"),_.disconnect(),_.removeAllListeners("connect"),_.removeAllListeners("error")}},{key:"render",value:function(){var e=this.state.value;return Object(U.jsxs)(U.Fragment,{children:[this.state.isOnline?null:Object(U.jsx)(g.a,{show:!0,fullscreen:!0,children:Object(U.jsx)(v.a,{fluid:"xxl",className:"h-100",style:{display:"flex",height:"100%",justifyItems:"center",alignItems:"center"},children:Object(U.jsx)(y.a,{style:{margin:"auto"},animation:"border",variant:"dark"})})}),this.state.showModal?Object(U.jsx)(g.a,{show:!0,fullscreen:this.state.modalProps.fullscreen,children:this.state.modalContent,scrollable:!0,animation:!1}):null,Object(U.jsxs)(m.a,{sx:{width:"100%"},children:[Object(U.jsx)(m.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(U.jsxs)(f.a,{value:e,onChange:this.handleChange,"aria-label":"basic tabs example",centered:!0,children:[Object(U.jsx)(p.a,Object(h.a)({label:"Posts"},ue(0))),Object(U.jsx)(p.a,Object(h.a)({label:"Talks"},ue(1))),Object(U.jsx)(p.a,Object(h.a)({label:"Notes"},ue(2))),Object(U.jsx)(p.a,Object(h.a)({label:"Sign Out"},ue(3)))]})}),Object(U.jsx)(je,{value:e,index:0,children:Object(U.jsx)(V,{displayNotification:this.props.displayNotification,modalOperations:{openModal:this.openModal,closeModal:this.closeModal}})}),Object(U.jsx)(je,{value:e,index:1,children:Object(U.jsx)($,{})}),Object(U.jsx)(je,{value:e,index:2,children:Object(U.jsx)(ie,{})}),Object(U.jsx)(je,{value:e,index:3,children:Object(U.jsx)(re,{logout:this.props.logout})})]})]})}}]),n}(c.Component),be=n(1444),he=n(281),Oe=n.n(he),me=n.p+"static/media/colab.3986cea1.jpg",xe=function(e){return Object(U.jsxs)(se.a,{className:"home",children:[Object(U.jsx)(se.a,{item:!0,xs:12,className:"gridItem",children:Object(U.jsx)(le.a,{display:"flex",alignItems:"center",justifyContent:"center",children:Object(U.jsxs)(be.a,{variant:"h3",children:[Object(U.jsx)("br",{}),Object(U.jsx)("br",{}),Object(U.jsx)("i",{children:Object(U.jsx)("b",{children:"Welcome to Engage!"})})]})})}),Object(U.jsx)("br",{}),Object(U.jsx)("br",{}),Object(U.jsx)(se.a,{item:!0,xs:12,className:"gridItem",children:Object(U.jsx)(le.a,{display:"flex",alignItems:"center",justifyContent:"center",children:Object(U.jsx)(be.a,{variant:"h5",color:"textSecondary",children:Object(U.jsx)("img",{src:me,alt:"Logo"})})})}),Object(U.jsx)("br",{}),Object(U.jsx)("br",{}),Object(U.jsx)(se.a,{item:!0,xs:12,className:"gridItem",children:Object(U.jsx)(le.a,{display:"flex",alignItems:"center",justifyContent:"center",children:Object(U.jsx)(Oe.a,{clientId:"269477906043-ahu2enkcene3nicbiqhnpiagesg6btck.apps.googleusercontent.com",buttonText:"Sign In With Google",onSuccess:e.login,onFailure:function(e){return console.log("GoogleLogin :",e)},cookiePolicy:"single_host_origin"})})})]})},fe=n(1432),pe=n(1429);window.axios=ce;window.login=function(){!function(e,t,n){var c={method:"post",url:"https://localhost:5000/"+e,headers:{"Content-Type":"application/json"},data:t||JSON.stringify({data:"test"})};ce(c).then((function(t){console.log("/".concat(e," :"),t.data),n&&n(t.data)})).catch((function(t){console.log("/".concat(e," :"),t)}))}("google_auth",JSON.stringify({ga_token:"https://cataas.com/cat",user:{emailAddress:"1@gmail.com",firstName:"Roy",lastName:"Mustang",userImage:"https://cataas.com/cat"}}),(function(e){return console.log}))};var ge=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)({open:!1}),l=Object(r.a)(s,2),j=l[0],u=l[1],d=Object(c.useState)(!1),b=Object(r.a)(d,2),h=b[0],O=b[1];Object(c.useEffect)((function(){m()}),[]);var m=function(){ce.post("/ref_session","").then((function(e){console.log("/ref_session :",e.data),O(!0),e.data.status&&a(!0)})).catch((function(e){O(!0),console.log("/ref_session :",e)}))},x=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ce.post("/google_auth",{ga_token:t.tokenId});case 3:n=e.sent,c=n.data,console.log("/google_auth :",c),c.status&&a(!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("/google_auth :",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(i.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ce.post("/logout","");case 3:t=e.sent,n=t.data,console.log("/logout :",n),n.status&&a(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("/logout :",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),p=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;u({open:!0,message:t,severity:e,autoHideDuration:n})};return Object(U.jsxs)(U.Fragment,{children:[h?n?Object(U.jsx)(de,{logout:f,displayNotification:p}):Object(U.jsx)(xe,{login:x,displayNotification:p}):Object(U.jsx)(v.a,{fluid:"xxl",className:"h-100",style:{display:"flex",height:"100%",justifyItems:"center",alignItems:"center"},children:Object(U.jsx)(y.a,{style:{margin:"auto"},animation:"border",variant:"dark"})}),j.open?Object(U.jsx)(fe.a,{open:!0,autoHideDuration:j.autoHideDuration,onClose:function(){return u({open:!1})},children:Object(U.jsx)(pe.a,{severity:j.severity,sx:{width:"100%"},children:j.message})}):null]})};s.a.render(Object(U.jsx)(ge,{}),document.querySelector("#root"))}},[[1376,1,2]]]);
//# sourceMappingURL=main.14cf4da2.chunk.js.map